<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MOLDE â€” [NOMBRE_DEPARTAMENTO]</title>

<!--
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    INSTRUCCIONES PARA CLAUDE (IA)                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                            â•‘
â•‘  CONTEXTO:                                                                 â•‘
â•‘  Este es el molde departamental estÃ¡ndar de UnaUnCuarto (UUC).             â•‘
â•‘  Fue diseÃ±ado por Alan como parte de su proyecto de modernizaciÃ³n          â•‘
â•‘  documental. Combina lo mejor de ISO 9001, BPM, BPMN, Lean, Six Sigma    â•‘
â•‘  y SIPOC sin la burocracia tradicional.                                    â•‘
â•‘                                                                            â•‘
â•‘  CÃ“MO USAR ESTE MOLDE:                                                     â•‘
â•‘  1. Alan te darÃ¡ este archivo HTML + inputs (entrevistas, transcripciones, â•‘
â•‘     documentos del departamento).                                          â•‘
â•‘  2. Tu trabajo es LLENAR el objeto `data` con la informaciÃ³n real.         â•‘
â•‘  3. NUNCA modifiques la estructura de tabs, CSS, ni funciones render.      â•‘
â•‘  4. SOLO modifica el contenido dentro del objeto `data`.                   â•‘
â•‘  5. Respeta las categorÃ­as de tags existentes (ver tagTypes).              â•‘
â•‘  6. MantÃ©n la notaciÃ³n de archivos: PRS-[DEPTO]-[###]-Nombre-DDMMAA-v#    â•‘
â•‘                                                                            â•‘
â•‘  REGLAS DE LLENADO POR PESTAÃ‘A:                                            â•‘
â•‘                                                                            â•‘
â•‘  TAB 1 â€” VISTA GENERAL                                                     â•‘
â•‘  â†’ Extraer de la entrevista: descripciÃ³n del Ã¡rea, funciones principales,  â•‘
â•‘    personal, herramientas que usan, alcance.                               â•‘
â•‘  â†’ Cada nodo = 1 tema/hallazgo. Clasificar con tags:                       â•‘
â•‘    fortaleza / cuello / oportunidad / riesgo / proceso / contexto          â•‘
â•‘  â†’ Agrupar nodos en secciones temÃ¡ticas (mÃ¡x 5-7 secciones).              â•‘
â•‘                                                                            â•‘
â•‘  TAB 2 â€” FLUJO DE NEGOCIO                                                  â•‘
â•‘  â†’ El proceso MACRO del departamento de inicio a fin.                      â•‘
â•‘  â†’ Cada step = 1 etapa. Puede tener branches (decisiones sÃ­/no).          â•‘
â•‘  â†’ Incluir responsable en cada paso cuando se conozca.                     â•‘
â•‘  â†’ Si hay subprocesos, anidarlos como branches del paso principal.         â•‘
â•‘                                                                            â•‘
â•‘  TAB 3 â€” CORRELACIONES                                                     â•‘
â•‘  â†’ Relaciones causa-efecto INTERNAS del departamento.                      â•‘
â•‘  â†’ from/to son descripciones cortas del origen y destino.                  â•‘
â•‘  â†’ impact = consecuencia concreta, no genÃ©rica.                            â•‘
â•‘  â†’ type: directa (A causa B), inversa (A evita B), bidireccional.          â•‘
â•‘                                                                            â•‘
â•‘  TAB 4 â€” CUELLOS DE BOTELLA                                                â•‘
â•‘  â†’ Problemas REALES identificados en la entrevista.                        â•‘
â•‘  â†’ severity: critico (detiene operaciÃ³n), alto (retrasa), medio (molesta). â•‘
â•‘  â†’ No inventar cuellos. Si no hay info suficiente, dejar vacÃ­o.            â•‘
â•‘                                                                            â•‘
â•‘  TAB 5 â€” OPORTUNIDADES                                                     â•‘
â•‘  â†’ Mejoras identificables a partir de los cuellos y el contexto.           â•‘
â•‘  â†’ priority: game-changer / alta / media / baja.                           â•‘
â•‘  â†’ benefit = resultado esperado concreto y medible si es posible.          â•‘
â•‘                                                                            â•‘
â•‘  TAB 6 â€” PROCEDIMIENTOS                                                    â•‘
â•‘  â†’ Se llena cuando exista el documento formal (PRS-XXX-###).               â•‘
â•‘  â†’ Cada procedimiento lleva: cÃ³digo, nombre, SIPOC, pasos con             â•‘
â•‘    responsable + acciÃ³n + documento asociado.                              â•‘
â•‘  â†’ Si no hay procedimientos documentados aÃºn, dejar el placeholder.        â•‘
â•‘  â†’ SIPOC = { suppliers, inputs, process, outputs, customers }              â•‘
â•‘                                                                            â•‘
â•‘  TAB 7 â€” ESTRUCTURA Y RESPONSABILIDADES                                    â•‘
â•‘  â†’ Organigrama funcional (quiÃ©n reporta a quiÃ©n).                          â•‘
â•‘  â†’ Roles con funciones principales (no descripciones de puesto largas).    â•‘
â•‘  â†’ LÃ­mites de autorizaciÃ³n (quiÃ©n aprueba quÃ©, hasta cuÃ¡nto).             â•‘
â•‘                                                                            â•‘
â•‘  TAB 8 â€” DEPENDENCIAS INTERDEPARTAMENTALES                                 â•‘
â•‘  â†’ QuÃ© RECIBE este departamento de otros (inputs externos).                â•‘
â•‘  â†’ QuÃ© ENTREGA este departamento a otros (outputs externos).               â•‘
â•‘  â†’ Canal de comunicaciÃ³n (correo, WhatsApp, fÃ­sico, sistema).              â•‘
â•‘  â†’ Este tab alimenta al HTML MAESTRO de empresa.                           â•‘
â•‘                                                                            â•‘
â•‘  TAB 9 â€” INDICADORES / KPIs                                                â•‘
â•‘  â†’ MÃ©tricas que el departamento DEBERÃA medir.                             â•‘
â•‘  â†’ Si ya miden algo, documentarlo. Si no, proponer con base en contexto.   â•‘
â•‘  â†’ Incluir: nombre, fÃ³rmula/descripciÃ³n, frecuencia, responsable.         â•‘
â•‘  â†’ NO inventar metas numÃ©ricas â€” eso lo define Alan con el Ã¡rea.           â•‘
â•‘                                                                            â•‘
â•‘  TAB 10 â€” POLÃTICAS Y LINEAMIENTOS                                         â•‘
â•‘  â†’ Reglas de operaciÃ³n del Ã¡rea.                                           â•‘
â•‘  â†’ Criterios de decisiÃ³n (ej: precio > cantidad > tiempo).                 â•‘
â•‘  â†’ Excepciones y quiÃ©n las autoriza.                                       â•‘
â•‘  â†’ Son reglas autoimpuestas, NO mÃ©tricas auditables.                       â•‘
â•‘                                                                            â•‘
â•‘  NOTAS GENERALES:                                                          â•‘
â•‘  - El metadato "tipo_proceso" va en data.meta (operativo/soporte/          â•‘
â•‘    estratÃ©gico/estratÃ©gico-operativo).                                      â•‘
â•‘  - VersiÃ³n y fecha se actualizan en data.meta cada vez que se modifique.   â•‘
â•‘  - Si una pestaÃ±a no tiene info suficiente, dejar el array vacÃ­o []        â•‘
â•‘    y el placeholder se mostrarÃ¡ automÃ¡ticamente.                           â•‘
â•‘  - NUNCA mezclar datos de un departamento con otro.                        â•‘
â•‘  - Las correlaciones de Tab 3 son INTERNAS. Las de Tab 8 son EXTERNAS.     â•‘
â•‘                                                                            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->

<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap');

  :root {
    --bg-primary: #0a0a0f;
    --bg-secondary: #12121a;
    --bg-card: #1a1a25;
    --bg-card-hover: #22222f;
    --border: #2a2a3a;
    --border-light: #3a3a4a;
    --text-primary: #e8e8f0;
    --text-secondary: #8888a0;
    --text-muted: #555570;
    --accent-cyan: #00d4ff;
    --accent-green: #00ff88;
    --accent-orange: #ff8800;
    --accent-red: #ff4444;
    --accent-purple: #aa77ff;
    --accent-yellow: #ffcc00;
    --accent-blue: #4488ff;
    --accent-pink: #ff66aa;
    --font-mono: 'Space Mono', monospace;
    --font-sans: 'Inter', sans-serif;
    --radius: 8px;
    --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: var(--font-sans);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .header {
    padding: 32px 40px 20px;
    border-bottom: 1px solid var(--border);
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at 20% 50%, rgba(0,212,255,0.05) 0%, transparent 60%),
                radial-gradient(ellipse at 80% 50%, rgba(170,119,255,0.03) 0%, transparent 60%);
    pointer-events: none;
  }
  .header-meta {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-muted);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .header-title {
    font-family: var(--font-mono);
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 6px;
  }
  .header-sub {
    font-size: 14px;
    color: var(--text-secondary);
    max-width: 600px;
    line-height: 1.5;
  }
  .header-badges {
    display: flex;
    gap: 10px;
    margin-top: 14px;
    flex-wrap: wrap;
  }
  .badge {
    font-family: var(--font-mono);
    font-size: 10px;
    padding: 4px 10px;
    border-radius: 20px;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .badge-tipo { background: rgba(0,212,255,0.12); color: var(--accent-cyan); border: 1px solid rgba(0,212,255,0.25); }
  .badge-version { background: rgba(0,255,136,0.1); color: var(--accent-green); border: 1px solid rgba(0,255,136,0.2); }
  .badge-fecha { background: rgba(170,119,255,0.1); color: var(--accent-purple); border: 1px solid rgba(170,119,255,0.2); }
  .badge-notacion { background: rgba(255,136,0,0.1); color: var(--accent-orange); border: 1px solid rgba(255,136,0,0.2); }

  /* â”€â”€ TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tabs {
    display: flex;
    gap: 0;
    padding: 0 40px;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  .tabs::-webkit-scrollbar { display: none; }
  .tab {
    font-family: var(--font-mono);
    font-size: 11px;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 14px 18px;
    cursor: pointer;
    color: var(--text-muted);
    border-bottom: 2px solid transparent;
    white-space: nowrap;
    transition: var(--transition);
    user-select: none;
  }
  .tab:hover { color: var(--text-secondary); }
  .tab.active {
    color: var(--accent-cyan);
    border-bottom-color: var(--accent-cyan);
  }
  .tab.empty::after {
    content: 'â—‹';
    margin-left: 6px;
    font-size: 8px;
    vertical-align: middle;
    opacity: 0.5;
  }
  .tab.filled::after {
    content: 'â—';
    margin-left: 6px;
    font-size: 8px;
    vertical-align: middle;
    color: var(--accent-green);
  }

  /* â”€â”€ CONTENT AREA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .content {
    padding: 30px 40px 60px;
    max-width: 1100px;
  }

  /* â”€â”€ PLACEHOLDER (empty state) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .placeholder {
    border: 1px dashed var(--border-light);
    border-radius: var(--radius);
    padding: 60px 40px;
    text-align: center;
    margin: 20px 0;
  }
  .placeholder-icon {
    font-size: 40px;
    margin-bottom: 16px;
    opacity: 0.4;
  }
  .placeholder-title {
    font-family: var(--font-mono);
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
  }
  .placeholder-hint {
    font-size: 12px;
    color: var(--text-muted);
    max-width: 400px;
    margin: 0 auto;
    line-height: 1.6;
  }
  .placeholder-instruction {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--accent-cyan);
    opacity: 0.5;
    margin-top: 16px;
    letter-spacing: 1px;
  }

  /* â”€â”€ SECTIONS (collapsible) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .section {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 12px;
    overflow: hidden;
    transition: var(--transition);
  }
  .section:hover { border-color: var(--border-light); }
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    cursor: pointer;
    background: var(--bg-secondary);
    user-select: none;
  }
  .section-title {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.5px;
  }
  .section-toggle {
    font-family: var(--font-mono);
    font-size: 16px;
    color: var(--text-muted);
    transition: var(--transition);
  }
  .section-body {
    padding: 0 20px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.3s ease;
  }
  .section.open .section-body {
    max-height: 3000px;
    padding: 16px 20px;
  }
  .section.open .section-toggle {
    transform: rotate(45deg);
  }

  /* â”€â”€ ITEMS (nodes) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .item {
    display: flex;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid rgba(42,42,58,0.5);
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .item:last-child { border-bottom: none; }
  .item-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-top: 6px;
    flex-shrink: 0;
  }
  .item-text {
    font-size: 13px;
    line-height: 1.6;
    color: var(--text-secondary);
  }
  .item-text strong {
    color: var(--text-primary);
    font-weight: 600;
  }
  .item-sub {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 4px;
    line-height: 1.5;
  }

  /* â”€â”€ TAGS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tag {
    display: inline-block;
    font-family: var(--font-mono);
    font-size: 9px;
    padding: 2px 8px;
    border-radius: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-right: 6px;
    margin-top: 6px;
  }
  .tag-fortaleza { background: rgba(0,255,136,0.12); color: var(--accent-green); }
  .tag-cuello { background: rgba(255,68,68,0.12); color: var(--accent-red); }
  .tag-oportunidad { background: rgba(0,212,255,0.12); color: var(--accent-cyan); }
  .tag-riesgo { background: rgba(255,136,0,0.12); color: var(--accent-orange); }
  .tag-proceso { background: rgba(170,119,255,0.1); color: var(--accent-purple); }
  .tag-contexto { background: rgba(255,204,0,0.1); color: var(--accent-yellow); }

  /* â”€â”€ FLOW (tab 2) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .flow-step {
    display: flex;
    gap: 16px;
    padding: 16px 0;
    border-left: 2px solid var(--border);
    margin-left: 20px;
    padding-left: 24px;
    position: relative;
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .flow-step::before {
    content: '';
    position: absolute;
    left: -7px;
    top: 20px;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: var(--bg-primary);
    border: 2px solid var(--accent-cyan);
  }
  .flow-step.decision::before {
    border-radius: 2px;
    transform: rotate(45deg);
    border-color: var(--accent-orange);
  }
  .flow-num {
    font-family: var(--font-mono);
    font-size: 11px;
    font-weight: 700;
    min-width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    flex-shrink: 0;
  }
  .flow-content { flex: 1; }
  .flow-title {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  .flow-desc {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.5;
  }
  .flow-branch {
    margin-left: 40px;
    margin-top: 8px;
    padding: 8px 12px;
    border-left: 2px dashed var(--accent-orange);
    font-size: 11px;
    color: var(--text-muted);
  }
  .flow-branch-label {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--accent-orange);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 4px;
  }

  /* â”€â”€ CORRELATIONS (tab 3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .correlation {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 12px;
    align-items: center;
    padding: 14px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 10px;
    transition: var(--transition);
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .correlation:hover { border-color: var(--border-light); background: var(--bg-card); }
  .corr-node {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.5;
  }
  .corr-node strong {
    display: block;
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--text-primary);
    margin-bottom: 2px;
  }
  .corr-arrow {
    font-family: var(--font-mono);
    font-size: 18px;
    color: var(--accent-cyan);
  }
  .corr-impact {
    font-size: 11px;
    color: var(--accent-orange);
    margin-top: 6px;
    font-style: italic;
  }

  /* â”€â”€ SEVERITY / PRIORITY BADGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .severity, .priority {
    font-family: var(--font-mono);
    font-size: 9px;
    padding: 3px 8px;
    border-radius: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    display: inline-block;
    margin-bottom: 8px;
  }
  .severity-critico { background: rgba(255,68,68,0.15); color: var(--accent-red); }
  .severity-alto { background: rgba(255,136,0,0.15); color: var(--accent-orange); }
  .severity-medio { background: rgba(255,204,0,0.12); color: var(--accent-yellow); }
  .priority-game-changer { background: rgba(0,255,136,0.15); color: var(--accent-green); }
  .priority-alta { background: rgba(0,212,255,0.15); color: var(--accent-cyan); }
  .priority-media { background: rgba(170,119,255,0.12); color: var(--accent-purple); }
  .priority-baja { background: rgba(136,136,160,0.15); color: var(--text-secondary); }

  /* â”€â”€ BOTTLENECK / OPPORTUNITY CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .card {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 18px 20px;
    margin-bottom: 12px;
    background: var(--bg-card);
    transition: var(--transition);
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .card:hover { background: var(--bg-card-hover); border-color: var(--border-light); }
  .card-title {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  .card-desc {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
  }
  .card-meta {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 8px;
  }

  /* â”€â”€ PROCEDURE TABLE (tab 6) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .proc-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
    margin: 16px 0;
  }
  .proc-table th {
    font-family: var(--font-mono);
    font-size: 10px;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--text-muted);
    padding: 10px 12px;
    border-bottom: 1px solid var(--border-light);
    text-align: left;
  }
  .proc-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
    color: var(--text-secondary);
    vertical-align: top;
  }
  .proc-table tr:hover td { background: var(--bg-card); }

  /* â”€â”€ SIPOC BLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .sipoc {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    margin: 16px 0;
  }
  .sipoc-col {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px;
    background: var(--bg-secondary);
  }
  .sipoc-label {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--accent-cyan);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .sipoc-items {
    font-size: 11px;
    color: var(--text-secondary);
    line-height: 1.8;
  }

  /* â”€â”€ ORG / STRUCTURE (tab 7) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .org-role {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    padding: 14px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 10px;
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .org-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--bg-card);
    border: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: 14px;
    font-weight: 700;
    color: var(--accent-cyan);
    flex-shrink: 0;
  }
  .org-info { flex: 1; }
  .org-name {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
  }
  .org-title {
    font-size: 11px;
    color: var(--accent-purple);
    margin-top: 2px;
  }
  .org-functions {
    font-size: 12px;
    color: var(--text-secondary);
    margin-top: 6px;
    line-height: 1.6;
  }
  .org-auth {
    font-size: 11px;
    color: var(--accent-orange);
    margin-top: 4px;
    font-style: italic;
  }

  /* â”€â”€ DEPENDENCY ARROWS (tab 8) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .dep-group-title {
    font-family: var(--font-mono);
    font-size: 12px;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin: 24px 0 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }
  .dep-group-title.inputs { color: var(--accent-cyan); }
  .dep-group-title.outputs { color: var(--accent-green); }
  .dep-item {
    display: grid;
    grid-template-columns: 140px 1fr 100px;
    gap: 12px;
    padding: 10px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 8px;
    font-size: 12px;
    align-items: center;
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .dep-dept {
    font-family: var(--font-mono);
    font-size: 11px;
    font-weight: 700;
    color: var(--text-primary);
  }
  .dep-what { color: var(--text-secondary); }
  .dep-channel {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--text-muted);
    text-align: right;
    letter-spacing: 0.5px;
  }

  /* â”€â”€ KPI (tab 9) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .kpi-card {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px 20px;
    margin-bottom: 10px;
    background: var(--bg-card);
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .kpi-name {
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
  }
  .kpi-formula {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--accent-cyan);
    margin-bottom: 6px;
  }
  .kpi-meta {
    font-size: 11px;
    color: var(--text-muted);
  }
  .kpi-meta span {
    margin-right: 16px;
  }

  /* â”€â”€ POLICY (tab 10) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .policy {
    padding: 14px 16px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 10px;
    animation: fadeUp 0.3s ease forwards;
    opacity: 0;
  }
  .policy-rule {
    font-size: 13px;
    color: var(--text-primary);
    font-weight: 500;
    margin-bottom: 4px;
  }
  .policy-detail {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.5;
  }
  .policy-exception {
    font-size: 11px;
    color: var(--accent-orange);
    margin-top: 6px;
  }

  /* â”€â”€ ANIMATIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 768px) {
    .header { padding: 20px 16px 16px; }
    .tabs { padding: 0 16px; }
    .content { padding: 20px 16px 40px; }
    .sipoc { grid-template-columns: 1fr; }
    .dep-item { grid-template-columns: 1fr; gap: 4px; }
    .correlation { grid-template-columns: 1fr; text-align: center; }
  }
</style>
</head>
<body>

<script>
/*
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                        OBJETO DATA â€” LLENAR AQUÃ                          â•‘
â•‘                                                                            â•‘
â•‘  Claude: Solo modifica el contenido de este objeto.                        â•‘
â•‘  NO toques CSS, funciones render, ni estructura de tabs.                   â•‘
â•‘  Cada array vacÃ­o [] mostrarÃ¡ el placeholder correspondiente.              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
*/

const data = {

  // â”€â”€ METADATOS DEL DEPARTAMENTO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  meta: {
    departamento: "[NOMBRE DEL DEPARTAMENTO]",
    responsable: "[NOMBRE DEL RESPONSABLE]",
    tipo_proceso: "[operativo | soporte | estratÃ©gico | estratÃ©gico-operativo]",
    alcance: "[DescripciÃ³n breve del alcance del departamento]",
    notacion: "PRS-[DEPTO]-001",  // Ej: PRS-COM-001
    version: "0.0",
    fecha: "DD/MM/AA",
  },

  // â”€â”€ TAB 1: VISTA GENERAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Cada secciÃ³n = agrupaciÃ³n temÃ¡tica. Cada item = hallazgo/observaciÃ³n.
  // tags vÃ¡lidos: fortaleza, cuello, oportunidad, riesgo, proceso, contexto
  overview: [
    /*
    {
      title: "Nombre de la secciÃ³n temÃ¡tica",
      items: [
        {
          text: "Hallazgo principal en negritas",
          sub: "Detalle o contexto adicional",
          tags: ["proceso", "fortaleza"]
        },
      ]
    },
    */
  ],

  // â”€â”€ TAB 2: FLUJO DE NEGOCIO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Proceso macro del departamento. type: "step" | "decision"
  flow: [
    /*
    {
      num: "01",
      title: "Nombre del paso",
      desc: "DescripciÃ³n de lo que sucede",
      responsible: "Nombre/Puesto",
      type: "step",          // "step" o "decision"
      color_bg: "#0a1a2a",   // fondo del nÃºmero
      color_text: "var(--accent-cyan)",
      branches: [            // Solo si type === "decision"
        { label: "SÃ", desc: "Lo que pasa si sÃ­" },
        { label: "NO", desc: "Lo que pasa si no" },
      ]
    },
    */
  ],

  // â”€â”€ TAB 3: CORRELACIONES (INTERNAS) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Relaciones causa-efecto DENTRO del departamento.
  // type: "directa" | "inversa" | "bidireccional"
  correlations: [
    /*
    {
      from: "Origen del efecto",
      from_detail: "Detalle del origen",
      to: "Destino del efecto",
      to_detail: "Detalle del destino",
      impact: "Consecuencia concreta",
      type: "directa"
    },
    */
  ],

  // â”€â”€ TAB 4: CUELLOS DE BOTELLA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Solo problemas REALES de la entrevista. severity: critico | alto | medio
  bottlenecks: [
    /*
    {
      title: "Nombre del cuello",
      severity: "critico",
      desc: "DescripciÃ³n del problema",
      impact: "Frecuencia o contexto adicional"
    },
    */
  ],

  // â”€â”€ TAB 5: OPORTUNIDADES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // priority: game-changer | alta | media | baja
  opportunities: [
    /*
    {
      title: "Nombre de la oportunidad",
      priority: "alta",
      desc: "DescripciÃ³n de la mejora",
      benefit: "Resultado esperado concreto"
    },
    */
  ],

  // â”€â”€ TAB 6: PROCEDIMIENTOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Se llena cuando exista PRS-XXX-### formal.
  procedures: [
    /*
    {
      code: "PRS-COM-001",
      name: "Procedimiento de Compras EstÃ¡ndar",
      sipoc: {
        suppliers: ["Residente de obra", "AlmacÃ©n"],
        inputs: ["Solicitud de material", "Listado de faltantes"],
        process: "CotizaciÃ³n â†’ Comparativa â†’ OC â†’ Entrega",
        outputs: ["Orden de compra", "Material en obra"],
        customers: ["AlmacÃ©n", "Residente de obra"]
      },
      steps: [
        { num: 1, responsible: "Puesto", action: "DescripciÃ³n de la acciÃ³n", doc: "Formato asociado o null" },
      ]
    },
    */
  ],

  // â”€â”€ TAB 7: ESTRUCTURA Y RESPONSABILIDADES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  structure: [
    /*
    {
      name: "Nombre de la persona",
      title: "Puesto",
      initials: "XX",        // Para el avatar
      reports_to: "Jefe directo o null",
      functions: "Funciones principales separadas por coma",
      auth_limit: "QuÃ© puede aprobar y hasta cuÃ¡nto (o null)"
    },
    */
  ],

  // â”€â”€ TAB 8: DEPENDENCIAS INTERDEPARTAMENTALES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // inputs = lo que RECIBE de otros. outputs = lo que ENTREGA a otros.
  dependencies: {
    inputs: [
      /*
      { dept: "Departamento origen", what: "QuÃ© recibe", channel: "Correo/WhatsApp/FÃ­sico/Sistema" },
      */
    ],
    outputs: [
      /*
      { dept: "Departamento destino", what: "QuÃ© entrega", channel: "Correo/WhatsApp/FÃ­sico/Sistema" },
      */
    ]
  },

  // â”€â”€ TAB 9: INDICADORES / KPIs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // NO inventar metas numÃ©ricas. Solo nombre + fÃ³rmula + frecuencia.
  kpis: [
    /*
    {
      name: "Nombre del indicador",
      formula: "CÃ³mo se mide (descripciÃ³n o fÃ³rmula)",
      frequency: "Mensual/Semanal/Por proyecto",
      responsible: "QuiÃ©n lo mide"
    },
    */
  ],

  // â”€â”€ TAB 10: POLÃTICAS Y LINEAMIENTOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Reglas autoimpuestas, NO mÃ©tricas auditables.
  policies: [
    /*
    {
      rule: "Enunciado de la regla",
      detail: "Contexto o explicaciÃ³n",
      exception: "QuiÃ©n autoriza la excepciÃ³n (o null)"
    },
    */
  ],

};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â• NO MODIFICAR NADA DEBAJO DE ESTA LÃNEA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

const tabs = [
  { id: 'overview',       label: 'Vista General',       icon: 'ğŸ§ ', dataKey: 'overview' },
  { id: 'flow',           label: 'Flujo',               icon: 'ğŸ”€', dataKey: 'flow' },
  { id: 'correlations',   label: 'Correlaciones',       icon: 'ğŸ”—', dataKey: 'correlations' },
  { id: 'bottlenecks',    label: 'Cuellos',             icon: 'ğŸš¨', dataKey: 'bottlenecks' },
  { id: 'opportunities',  label: 'Oportunidades',       icon: 'ğŸš€', dataKey: 'opportunities' },
  { id: 'procedures',     label: 'Procedimientos',      icon: 'ğŸ“‹', dataKey: 'procedures' },
  { id: 'structure',      label: 'Estructura',          icon: 'ğŸ‘¥', dataKey: 'structure' },
  { id: 'dependencies',   label: 'Dependencias',        icon: 'ğŸ”—', dataKey: 'dependencies' },
  { id: 'kpis',           label: 'KPIs',                icon: 'ğŸ“Š', dataKey: 'kpis' },
  { id: 'policies',       label: 'PolÃ­ticas',           icon: 'âš™ï¸', dataKey: 'policies' },
];

const placeholders = {
  overview:      { icon: 'ğŸ§ ', title: 'Vista General vacÃ­a', hint: 'Se llenarÃ¡ con los hallazgos de la entrevista al responsable del departamento. Secciones temÃ¡ticas con nodos clasificados por tipo.', instruction: 'INPUT: TranscripciÃ³n de entrevista' },
  flow:          { icon: 'ğŸ”€', title: 'Flujo de Negocio vacÃ­o', hint: 'Proceso macro del departamento de inicio a fin. Cada paso con responsable, decisiones con ramificaciones.', instruction: 'INPUT: Entrevista + observaciÃ³n de proceso' },
  correlations:  { icon: 'ğŸ”—', title: 'Correlaciones vacÃ­as', hint: 'Relaciones causa-efecto internas del departamento. CÃ³mo un proceso afecta a otro dentro de la misma Ã¡rea.', instruction: 'INPUT: AnÃ¡lisis cruzado de hallazgos' },
  bottlenecks:   { icon: 'ğŸš¨', title: 'Cuellos de Botella vacÃ­os', hint: 'Problemas reales identificados en campo. No se inventan â€” solo lo que la entrevista y observaciÃ³n revelan.', instruction: 'INPUT: Entrevista + dolor real del Ã¡rea' },
  opportunities: { icon: 'ğŸš€', title: 'Oportunidades vacÃ­as', hint: 'Mejoras identificables a partir de los cuellos y el contexto operativo. Priorizadas por impacto.', instruction: 'INPUT: Derivado de cuellos + contexto' },
  procedures:    { icon: 'ğŸ“‹', title: 'Procedimientos vacÃ­os', hint: 'Se llena cuando existan documentos PRS formales. Cada procedimiento con SIPOC + pasos numerados con responsable y formato asociado.', instruction: 'INPUT: Documento PRS-XXX-### formal' },
  structure:     { icon: 'ğŸ‘¥', title: 'Estructura vacÃ­a', hint: 'Organigrama funcional del departamento. QuiÃ©n, quÃ© hace, a quiÃ©n reporta, quÃ© puede autorizar.', instruction: 'INPUT: Entrevista al responsable' },
  dependencies:  { icon: 'ğŸ”—', title: 'Dependencias vacÃ­as', hint: 'QuÃ© recibe de otros departamentos y quÃ© les entrega. Incluye canal de comunicaciÃ³n. Alimenta al HTML Maestro de empresa.', instruction: 'INPUT: Entrevista + mapeo interdepartamental' },
  kpis:          { icon: 'ğŸ“Š', title: 'Indicadores vacÃ­os', hint: 'MÃ©tricas que el departamento deberÃ­a o ya estÃ¡ midiendo. Sin metas numÃ©ricas inventadas â€” eso lo define el Ã¡rea.', instruction: 'INPUT: Entrevista + contexto operativo' },
  policies:      { icon: 'âš™ï¸', title: 'PolÃ­ticas vacÃ­as', hint: 'Reglas de operaciÃ³n autoimpuestas. Criterios de decisiÃ³n, excepciones y quiÃ©n las autoriza.', instruction: 'INPUT: Entrevista + lineamientos existentes' },
};

function isTabEmpty(tabId) {
  const key = tabs.find(t => t.id === tabId)?.dataKey;
  if (!key) return true;
  const d = data[key];
  if (Array.isArray(d)) return d.length === 0;
  if (typeof d === 'object' && d !== null) {
    return Object.values(d).every(v => Array.isArray(v) ? v.length === 0 : !v);
  }
  return !d;
}

function renderPlaceholder(tabId) {
  const p = placeholders[tabId];
  return `
    <div class="placeholder">
      <div class="placeholder-icon">${p.icon}</div>
      <div class="placeholder-title">${p.title}</div>
      <div class="placeholder-hint">${p.hint}</div>
      <div class="placeholder-instruction">${p.instruction}</div>
    </div>`;
}

function stagger(i) { return `animation-delay: ${i * 0.05}s`; }

function renderTags(tags) {
  return tags.map(t => `<span class="tag tag-${t}">${t}</span>`).join('');
}

// â”€â”€ RENDER FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function renderOverview() {
  if (data.overview.length === 0) return renderPlaceholder('overview');
  return data.overview.map(section => `
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title">${section.title}</div>
        <div class="section-toggle">+</div>
      </div>
      <div class="section-body">
        ${section.items.map((item, i) => `
          <div class="item" style="${stagger(i)}">
            <div class="item-dot" style="background:var(--accent-cyan)"></div>
            <div class="item-text">
              <strong>${item.text}</strong>
              ${item.sub ? `<div class="item-sub">${item.sub}</div>` : ''}
              ${item.tags ? renderTags(item.tags) : ''}
            </div>
          </div>`).join('')}
      </div>
    </div>`).join('');
}

function renderFlow() {
  if (data.flow.length === 0) return renderPlaceholder('flow');
  return `<div style="padding:8px 0">${data.flow.map((step, i) => `
    <div class="flow-step ${step.type === 'decision' ? 'decision' : ''}" style="${stagger(i)}">
      <div class="flow-num" style="background:${step.color_bg || '#0a1a2a'};color:${step.color_text || 'var(--accent-cyan)'}">${step.num}</div>
      <div class="flow-content">
        <div class="flow-title">${step.title}</div>
        <div class="flow-desc">${step.desc}</div>
        ${step.responsible ? `<div style="margin-top:4px;font-size:11px;color:var(--accent-purple)">â†’ ${step.responsible}</div>` : ''}
        ${step.branches ? step.branches.map(b => `
          <div class="flow-branch">
            <div class="flow-branch-label">${b.label}</div>
            ${b.desc}
          </div>`).join('') : ''}
      </div>
    </div>`).join('')}</div>`;
}

function renderCorrelations() {
  if (data.correlations.length === 0) return renderPlaceholder('correlations');
  const arrows = { directa: 'â†’', inversa: 'â†', bidireccional: 'â†”' };
  return data.correlations.map((c, i) => `
    <div class="correlation" style="${stagger(i)}">
      <div class="corr-node">
        <strong>${c.from}</strong>
        ${c.from_detail || ''}
      </div>
      <div class="corr-arrow">${arrows[c.type] || 'â†’'}</div>
      <div class="corr-node">
        <strong>${c.to}</strong>
        ${c.to_detail || ''}
      </div>
    </div>
    ${c.impact ? `<div class="corr-impact" style="margin:-4px 0 12px 16px;animation:fadeUp 0.3s ease forwards;opacity:0;${stagger(i)}">âš¡ ${c.impact}</div>` : ''}`).join('');
}

function renderBottlenecks() {
  if (data.bottlenecks.length === 0) return renderPlaceholder('bottlenecks');
  return data.bottlenecks.map((b, i) => `
    <div class="card" style="${stagger(i)}">
      <div class="severity severity-${b.severity}">${b.severity}</div>
      <div class="card-title">${b.title}</div>
      <div class="card-desc">${b.desc}</div>
      ${b.impact ? `<div class="card-meta">${b.impact}</div>` : ''}
    </div>`).join('');
}

function renderOpportunities() {
  if (data.opportunities.length === 0) return renderPlaceholder('opportunities');
  return data.opportunities.map((o, i) => `
    <div class="card" style="${stagger(i)}">
      <div class="priority priority-${o.priority}">${o.priority.replace('-', ' ')}</div>
      <div class="card-title">${o.title}</div>
      <div class="card-desc">${o.desc}</div>
      ${o.benefit ? `<div class="card-meta" style="color:var(--accent-green)">â†’ ${o.benefit}</div>` : ''}
    </div>`).join('');
}

function renderProcedures() {
  if (data.procedures.length === 0) return renderPlaceholder('procedures');
  return data.procedures.map(proc => `
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <div class="section-title"><span style="color:var(--accent-cyan)">${proc.code}</span> â€” ${proc.name}</div>
        <div class="section-toggle">+</div>
      </div>
      <div class="section-body">
        ${proc.sipoc ? `
        <div class="sipoc">
          <div class="sipoc-col"><div class="sipoc-label">Suppliers</div><div class="sipoc-items">${proc.sipoc.suppliers.join('<br>')}</div></div>
          <div class="sipoc-col"><div class="sipoc-label">Inputs</div><div class="sipoc-items">${proc.sipoc.inputs.join('<br>')}</div></div>
          <div class="sipoc-col"><div class="sipoc-label">Process</div><div class="sipoc-items">${proc.sipoc.process}</div></div>
          <div class="sipoc-col"><div class="sipoc-label">Outputs</div><div class="sipoc-items">${proc.sipoc.outputs.join('<br>')}</div></div>
          <div class="sipoc-col"><div class="sipoc-label">Customers</div><div class="sipoc-items">${proc.sipoc.customers.join('<br>')}</div></div>
        </div>` : ''}
        <table class="proc-table">
          <thead><tr><th>#</th><th>Responsable</th><th>AcciÃ³n</th><th>Documento</th></tr></thead>
          <tbody>${proc.steps.map(s => `
            <tr>
              <td style="font-family:var(--font-mono);color:var(--accent-cyan)">${s.num}</td>
              <td style="color:var(--text-primary);font-weight:500">${s.responsible}</td>
              <td>${s.action}</td>
              <td style="font-family:var(--font-mono);font-size:10px;color:var(--accent-purple)">${s.doc || 'â€”'}</td>
            </tr>`).join('')}</tbody>
        </table>
      </div>
    </div>`).join('');
}

function renderStructure() {
  if (data.structure.length === 0) return renderPlaceholder('structure');
  return data.structure.map((r, i) => `
    <div class="org-role" style="${stagger(i)}">
      <div class="org-avatar">${r.initials}</div>
      <div class="org-info">
        <div class="org-name">${r.name}</div>
        <div class="org-title">${r.title}</div>
        ${r.reports_to ? `<div style="font-size:10px;color:var(--text-muted);margin-top:2px">Reporta a: ${r.reports_to}</div>` : ''}
        <div class="org-functions">${r.functions}</div>
        ${r.auth_limit ? `<div class="org-auth">AutorizaciÃ³n: ${r.auth_limit}</div>` : ''}
      </div>
    </div>`).join('');
}

function renderDependencies() {
  const inp = data.dependencies.inputs;
  const out = data.dependencies.outputs;
  if (inp.length === 0 && out.length === 0) return renderPlaceholder('dependencies');
  let html = '';
  if (inp.length > 0) {
    html += `<div class="dep-group-title inputs">â¬‡ Lo que RECIBE de otros departamentos</div>`;
    html += inp.map((d, i) => `
      <div class="dep-item" style="${stagger(i)}">
        <div class="dep-dept">${d.dept}</div>
        <div class="dep-what">${d.what}</div>
        <div class="dep-channel">${d.channel}</div>
      </div>`).join('');
  }
  if (out.length > 0) {
    html += `<div class="dep-group-title outputs">â¬† Lo que ENTREGA a otros departamentos</div>`;
    html += out.map((d, i) => `
      <div class="dep-item" style="${stagger(i)}">
        <div class="dep-dept">${d.dept}</div>
        <div class="dep-what">${d.what}</div>
        <div class="dep-channel">${d.channel}</div>
      </div>`).join('');
  }
  return html;
}

function renderKPIs() {
  if (data.kpis.length === 0) return renderPlaceholder('kpis');
  return data.kpis.map((k, i) => `
    <div class="kpi-card" style="${stagger(i)}">
      <div class="kpi-name">${k.name}</div>
      <div class="kpi-formula">${k.formula}</div>
      <div class="kpi-meta">
        <span>ğŸ“… ${k.frequency}</span>
        <span>ğŸ‘¤ ${k.responsible}</span>
      </div>
    </div>`).join('');
}

function renderPolicies() {
  if (data.policies.length === 0) return renderPlaceholder('policies');
  return data.policies.map((p, i) => `
    <div class="policy" style="${stagger(i)}">
      <div class="policy-rule">${p.rule}</div>
      <div class="policy-detail">${p.detail}</div>
      ${p.exception ? `<div class="policy-exception">ExcepciÃ³n: ${p.exception}</div>` : ''}
    </div>`).join('');
}

const renderers = {
  overview: renderOverview,
  flow: renderFlow,
  correlations: renderCorrelations,
  bottlenecks: renderBottlenecks,
  opportunities: renderOpportunities,
  procedures: renderProcedures,
  structure: renderStructure,
  dependencies: renderDependencies,
  kpis: renderKPIs,
  policies: renderPolicies,
};

// â”€â”€ APP STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let activeTab = 'overview';

function switchTab(tabId) {
  activeTab = tabId;
  document.querySelectorAll('.tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tabId));
  document.getElementById('content').innerHTML = renderers[tabId]();
}

function toggleSection(el) {
  el.parentElement.classList.toggle('open');
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.addEventListener('DOMContentLoaded', () => {
  // Header
  document.getElementById('header-area').innerHTML = `
    <div class="header-meta">UnaUnCuarto â€” Molde Departamental</div>
    <div class="header-title">${data.meta.departamento}</div>
    <div class="header-sub">${data.meta.alcance}</div>
    <div class="header-badges">
      <span class="badge badge-tipo">${data.meta.tipo_proceso}</span>
      <span class="badge badge-version">v${data.meta.version}</span>
      <span class="badge badge-fecha">${data.meta.fecha}</span>
      <span class="badge badge-notacion">${data.meta.notacion}</span>
    </div>`;

  // Tabs
  const tabsEl = document.getElementById('tabs');
  tabsEl.innerHTML = tabs.map(t => {
    const empty = isTabEmpty(t.id);
    return `<div class="tab ${t.id === activeTab ? 'active' : ''} ${empty ? 'empty' : 'filled'}" data-tab="${t.id}" onclick="switchTab('${t.id}')">${t.icon} ${t.label}</div>`;
  }).join('');

  // Initial content
  switchTab(activeTab);
});
</script>

<div id="header-area" class="header"></div>
<div id="tabs" class="tabs"></div>
<div id="content" class="content"></div>

</body>
</html>
